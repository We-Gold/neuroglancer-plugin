import { useState } from "react"
import styles from "./styles.module.css"

function Menu({
	onUpload,
	onDownload,
	onFullscreen,
	isFullscreen,
	onScreenshot,
}: {
	onUpload: () => void
	onDownload: () => void
	onFullscreen: () => void
	isFullscreen: boolean
	onScreenshot: () => void
}): JSX.Element {
	const [showMenu, setShowMenu] = useState<boolean>(false)

	const wrapCallback = (callback: () => void) => () => {
		setShowMenu(false)
		callback()
	}

	return (
		<div className={`${styles.menu} ${showMenu ? styles.active : ""}`}>
			<div
				className={`${styles.menuButtonsArea} ${
					showMenu ? styles.showMenuButtons : ""
				}`}
			>
				<div
					className={styles.menuButton}
					onClick={wrapCallback(onUpload)}
				>
					<svg
						width="100%"
						viewBox="0 0 25 25"
						fill="none"
						xmlns="http://www.w3.org/2000/svg"
					>
						<g clipPath="url(#clip0_41_34)">
							<path
								d="M14.4531 18.75H10.5469C9.89746 18.75 9.375 18.2275 9.375 17.5781V9.375H5.09277C4.22363 9.375 3.78906 8.3252 4.4043 7.70996L11.8311 0.27832C12.1973 -0.0878906 12.7979 -0.0878906 13.1641 0.27832L20.5957 7.70996C21.2109 8.3252 20.7764 9.375 19.9072 9.375H15.625V17.5781C15.625 18.2275 15.1025 18.75 14.4531 18.75ZM25 18.3594V23.8281C25 24.4775 24.4775 25 23.8281 25H1.17188C0.522461 25 0 24.4775 0 23.8281V18.3594C0 17.71 0.522461 17.1875 1.17188 17.1875H7.8125V17.5781C7.8125 19.0869 9.03809 20.3125 10.5469 20.3125H14.4531C15.9619 20.3125 17.1875 19.0869 17.1875 17.5781V17.1875H23.8281C24.4775 17.1875 25 17.71 25 18.3594ZM18.9453 22.6562C18.9453 22.1191 18.5059 21.6797 17.9688 21.6797C17.4316 21.6797 16.9922 22.1191 16.9922 22.6562C16.9922 23.1934 17.4316 23.6328 17.9688 23.6328C18.5059 23.6328 18.9453 23.1934 18.9453 22.6562ZM22.0703 22.6562C22.0703 22.1191 21.6309 21.6797 21.0938 21.6797C20.5566 21.6797 20.1172 22.1191 20.1172 22.6562C20.1172 23.1934 20.5566 23.6328 21.0938 23.6328C21.6309 23.6328 22.0703 23.1934 22.0703 22.6562Z"
								fill="currentColor"
							/>
						</g>
						<defs>
							<clipPath id="clip0_41_34">
								<rect
									width="25"
									height="25"
									fill="currentColor"
								/>
							</clipPath>
						</defs>
					</svg>
				</div>
				<div
					className={styles.menuButton}
					onClick={wrapCallback(onDownload)}
				>
					<svg
						width="100%"
						viewBox="0 0 26 26"
						fill="none"
						xmlns="http://www.w3.org/2000/svg"
					>
						<g clipPath="url(#clip0_41_30)">
							<path
								d="M10.9252 0.511475H14.8314C15.4808 0.511475 16.0033 1.03394 16.0033 1.68335V9.88647H20.2855C21.1547 9.88647 21.5892 10.9363 20.974 11.5515L13.5472 18.9832C13.181 19.3494 12.5804 19.3494 12.2142 18.9832L4.77771 11.5515C4.16248 10.9363 4.59705 9.88647 5.46619 9.88647H9.7533V1.68335C9.7533 1.03394 10.2758 0.511475 10.9252 0.511475ZM25.3783 18.8708V24.3396C25.3783 24.989 24.8558 25.5115 24.2064 25.5115H1.55017C0.900757 25.5115 0.378296 24.989 0.378296 24.3396V18.8708C0.378296 18.2214 0.900757 17.699 1.55017 17.699H8.71326L11.1058 20.0916C12.0873 21.073 13.6693 21.073 14.6508 20.0916L17.0433 17.699H24.2064C24.8558 17.699 25.3783 18.2214 25.3783 18.8708ZM19.3236 23.1677C19.3236 22.6306 18.8842 22.1912 18.347 22.1912C17.8099 22.1912 17.3705 22.6306 17.3705 23.1677C17.3705 23.7048 17.8099 24.1443 18.347 24.1443C18.8842 24.1443 19.3236 23.7048 19.3236 23.1677ZM22.4486 23.1677C22.4486 22.6306 22.0092 22.1912 21.472 22.1912C20.9349 22.1912 20.4955 22.6306 20.4955 23.1677C20.4955 23.7048 20.9349 24.1443 21.472 24.1443C22.0092 24.1443 22.4486 23.7048 22.4486 23.1677Z"
								fill="currentColor"
							/>
						</g>
						<defs>
							<clipPath id="clip0_41_30">
								<rect
									width="25"
									height="25"
									fill="currentColor"
									transform="translate(0.378296 0.511475)"
								/>
							</clipPath>
						</defs>
					</svg>
				</div>
				<div
					className={styles.menuButton}
					onClick={wrapCallback(onFullscreen)}
				>
					{!isFullscreen ? (
						<svg
							width="100%"
							viewBox="0 0 26 26"
							fill="none"
							xmlns="http://www.w3.org/2000/svg"
						>
							<path
								d="M1.66504 9.23209V3.1774C1.66504 2.52798 2.1875 2.00552 2.83691 2.00552H8.8916C9.21387 2.00552 9.47754 2.2692 9.47754 2.59146V4.54459C9.47754 4.86685 9.21387 5.13052 8.8916 5.13052H4.79004V9.23209C4.79004 9.55435 4.52637 9.81802 4.2041 9.81802H2.25098C1.92871 9.81802 1.66504 9.55435 1.66504 9.23209ZM15.7275 2.59146V4.54459C15.7275 4.86685 15.9912 5.13052 16.3135 5.13052H20.415V9.23209C20.415 9.55435 20.6787 9.81802 21.001 9.81802H22.9541C23.2764 9.81802 23.54 9.55435 23.54 9.23209V3.1774C23.54 2.52798 23.0176 2.00552 22.3682 2.00552H16.3135C15.9912 2.00552 15.7275 2.2692 15.7275 2.59146ZM22.9541 16.068H21.001C20.6787 16.068 20.415 16.3317 20.415 16.654V20.7555H16.3135C15.9912 20.7555 15.7275 21.0192 15.7275 21.3415V23.2946C15.7275 23.6169 15.9912 23.8805 16.3135 23.8805H22.3682C23.0176 23.8805 23.54 23.3581 23.54 22.7086V16.654C23.54 16.3317 23.2764 16.068 22.9541 16.068ZM9.47754 23.2946V21.3415C9.47754 21.0192 9.21387 20.7555 8.8916 20.7555H4.79004V16.654C4.79004 16.3317 4.52637 16.068 4.2041 16.068H2.25098C1.92871 16.068 1.66504 16.3317 1.66504 16.654V22.7086C1.66504 23.3581 2.1875 23.8805 2.83691 23.8805H8.8916C9.21387 23.8805 9.47754 23.6169 9.47754 23.2946Z"
								fill="currentColor"
							/>
						</svg>
					) : (
						<svg
							width="100%"
							xmlns="http://www.w3.org/2000/svg"
							fill="none"
							viewBox="0 0 448 512"
						>
							<path
								d="M160 64c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 64-64 0c-17.7 0-32 14.3-32 32s14.3 32 32 32l96 0c17.7 0 32-14.3 32-32l0-96zM32 320c-17.7 0-32 14.3-32 32s14.3 32 32 32l64 0 0 64c0 17.7 14.3 32 32 32s32-14.3 32-32l0-96c0-17.7-14.3-32-32-32l-96 0zM352 64c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 96c0 17.7 14.3 32 32 32l96 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-64 0 0-64zM320 320c-17.7 0-32 14.3-32 32l0 96c0 17.7 14.3 32 32 32s32-14.3 32-32l0-64 64 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-96 0z"
								fill="currentColor"
							/>
						</svg>
					)}
				</div>
				<div
					className={styles.menuButton}
					onClick={wrapCallback(onScreenshot)}
				>
					<svg
						width="100%"
						viewBox="0 0 26 23"
						fill="none"
						xmlns="http://www.w3.org/2000/svg"
					>
						<path
							d="M25.8209 5.83188V19.8944C25.8209 21.1883 24.7711 22.2381 23.4772 22.2381H3.16467C1.87073 22.2381 0.820923 21.1883 0.820923 19.8944V5.83188C0.820923 4.53793 1.87073 3.48813 3.16467 3.48813H7.46155L8.06213 1.88168C8.40393 0.968597 9.27795 0.363129 10.2545 0.363129H16.3824C17.359 0.363129 18.233 0.968597 18.5748 1.88168L19.1803 3.48813H23.4772C24.7711 3.48813 25.8209 4.53793 25.8209 5.83188ZM19.1803 12.8631C19.1803 9.63071 16.5533 7.00375 13.3209 7.00375C10.0885 7.00375 7.46155 9.63071 7.46155 12.8631C7.46155 16.0956 10.0885 18.7225 13.3209 18.7225C16.5533 18.7225 19.1803 16.0956 19.1803 12.8631ZM17.6178 12.8631C17.6178 15.2313 15.6891 17.16 13.3209 17.16C10.9528 17.16 9.02405 15.2313 9.02405 12.8631C9.02405 10.495 10.9528 8.56625 13.3209 8.56625C15.6891 8.56625 17.6178 10.495 17.6178 12.8631Z"
							fill="currentColor"
						/>
					</svg>
				</div>
			</div>

			<svg
				width="1rem"
				viewBox="0 0 16 51"
				fill="none"
				xmlns="http://www.w3.org/2000/svg"
				onClick={() => {
					setShowMenu((prev) => !prev)
				}}
			>
				<circle cx="8" cy="33" r="3" fill="currentColor" />
				<circle cx="8" cy="24" r="3" fill="currentColor" />
				<circle cx="8" cy="15" r="3" fill="currentColor" />
			</svg>
		</div>
	)
}

export default Menu

